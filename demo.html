<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<script type="module"
  src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
</script>

<style>
  body {
    margin: 0;
    font-family: system-ui, sans-serif;
    color: #111;
    overflow-x: hidden;
  }

  section {
    min-height: 100vh;
    padding: 12vh 10vw;
    display: flex;
    align-items: center;
    font-size: clamp(26px, 4vw, 56px);
  }

  .hero {
    background: #ffffff;
  }

  .story {
    background: #f3f3f3;
  }

  .end {
    background: #111;
    color: #fff;
  }

  /* OBJET 3D */
  model-viewer {
    position: fixed;
    right: 8vw;
    top: 50%;
    width: 320px;
    height: 520px;
    transform: translateY(-50%);
    pointer-events: none;
    z-index: 10;
  }

  .text {
    max-width: 620px;
  }
</style>
</head>

<body>

<section class="hero">
  <div class="text">
    <h1>Une bouteille pas comme les autres</h1>
    <p>Un produit simple peut devenir une expérience.</p>
  </div>
</section>

<section class="story">
  <div class="text">
    <p>
      En scrollant, le produit accompagne la lecture,
      attire l’œil et valorise la marque.
    </p>
  </div>
</section>

<section class="end">
  <div class="text">
    <p>
      Même technologie.<br>
      Un site beaucoup plus impactant.
    </p>
  </div>
</section>

<model-viewer
  id="product"
  src="growthbottle.glb"
  interaction-prompt="none"
  camera-orbit="0deg 75deg 12m"
>
</model-viewer>

<script>
  const mv = document.getElementById("product");

  function clamp01(x) {
    return Math.min(1, Math.max(0, x));
  }

  function update() {
    const scrollY = window.scrollY;
    const maxScroll =
      document.body.scrollHeight - window.innerHeight;

    const p = clamp01(scrollY / maxScroll);

    /* =========================
       MOUVEMENT VERTICAL
    ========================= */
    const startY = -window.innerHeight * 0.2;
    const endY = window.innerHeight * 0.2;
    const y = startY + (endY - startY) * p;

    /* =========================
       ROTATION LENTE (PREMIUM)
    ========================= */
    const rot = p * 240; // lent, élégant

    mv.style.transform =
      `translate(0px, calc(-50% + ${y}px))`;

    mv.cameraOrbit =
      `${rot}deg 75deg 12m`;

    requestAnimationFrame(update);
  }

  mv.addEventListener("load", update);
  window.addEventListener("resize", update);
</script>

</body>
</html>
